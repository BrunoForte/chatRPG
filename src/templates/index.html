<!DOCTYPE HTML>
<html>
<head>
    <title>DougDoug Chat God App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" 
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" 
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" 
        integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" 
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-textfill@0.6.0/source/jquery.textfill.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {

            var socket = io();

            socket.on('message_send', function(msg, cb) {
                console.log("Got data: " + msg)

                // DATA RECEIVED:
                // message = string
                // current_user = string

                $('#user-message').text(msg.message);
                $('#user-name').text(msg.current_user[0].toUpperCase() + msg.current_user.substr(1));

                // Add an optional title to the beginning of username:
                // $('#user-name-' + msg.user_number).text('Mayor' + '\n' + msg.current_user[0].toUpperCase() + msg.current_user.substr(1) + " as Shrek");
                
                // Space out the text to fill the box evenly

                $('#user-name-box').textfill({
                     minFontPixels: 2,
                     maxFontPixels: 50,
                     explicitHeight: 60
                 });
                if (cb)
                    cb();
            });

            $('form#pickrandom').submit(function(event) {
                socket.emit('pickrandom');
                return false;
            });


            $('form#tts').change(function(event) {
                console.log($('#checkbox').prop('checked'))
                socket.emit('tts',
                    {'checked': $('#checkbox1').prop('checked')});
                return false;
            });

            $('form#choose').submit(function(event) {
                socket.emit('choose',
                    {'choosen_user': $("form#choose input").val()});
                $("form#choose input").val('')
                return false;
            });

            $('#voicename').change(function() {
                socket.emit('voicename', {'voice_name': $(this).val()})
            });
            $('#voicestyle').change(function() {
                socket.emit('voicestyle', {'voice_style': $(this).val()})
            });
        });
    </script>
</head>
<body>
    <h1 style="margin-bottom: 10px;">Holy Chat God Selector</h1>
    <div style="display:flex; flex-direction:row;">

        <div>
            <form id="pickrandom" method="POST" action="#" >
                <input type="submit" value="random" id="pick-random-input" style="border-color: #ccc; border-radius: 10px;">
            </form>
            <form id="tts" method="POST" action="#">
                <label for="tts">TTS 1:</label>
                <input id="checkbox" type="checkbox" class="tts-checkbox" style="text-align: left;" value="tts" name="tts" checked>
            </form> 
            <br><br>
            <form id="choose" class="choose-box" method="POST" action="#">
                <input id="choose-box" type="text" class="choose" placeholder="type the user">
            </form> 
            <br><br>
            <select id="voicename">
              <option value="pt-BR-BrendaNeural">Brenda</option>
              <option value="pt-BR-AntonioNeural">Ant√¥nio</option>
              <option value="pt-BR-FranciscaNeural">Francisca</option>
              <option value="pt-BR-FabioNeural">Fabio</option>
              <option value="pt-BR-JulioNeural">Julio</option>
              <option value="pt-PT-RaquelNeural">Raquel - PT</option>
              <option value="pt-PT-DuarteNeural">Duarte - PT</option>
              <option value="pt-PT-FernandaNeural">Fernanda - PT</option>
            </select>
            <select id="voicestyle">
              <option value="random">random</option>
              <option value="angry">angry</option>
              <option value="cheerful">cheerful</option>
              <option value="excited">excited</option>
              <option value="hopeful">hopeful</option>
              <option value="sad">sad</option>
              <option value="shouting">shouting</option>
              <option value="terrified">terrified</option>
              <option value="unfriendly">unfriendly</option>
              <option value="whispering">whispering</option>
            </select>
            <br><br>
            <div class="user-name-box" id="user-name-box"> 
                <span class="user-name" id="user-name">User</span>
            </div>
            <div class="user-message-box" id="user-message-box">
                <span class="user-message" id="user-message" >Mensagens</span>
            </div>
        </div>

        <div style="width: 87px;"></div>
    </div>
</body>
</html>